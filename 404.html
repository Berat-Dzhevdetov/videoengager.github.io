<html>

<head>
  <script>
    //check if path includes ve or pin
    function loadJsAsync(url) {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = url;
        script.onload = resolve;
        script.onerror = reject;
        document.body.appendChild(script);
      });
    }
    const availableEnvs = {
      'd': 'dev',
      p: 'prod',
      s: 'staging'
    }
    function getRedirectUrl() {
      const pathName = window.location.pathname;
      const pathNameArray = pathName.split('/');
      const firstPath = pathNameArray[1];
      let env;
      if (availableEnvs[pathNameArray]) {
        env = availableEnvs[pathNameArray];
      }
      const secondPath = pathNameArray[2];
      const thirdPath = pathNameArray[3];
      if (env && (secondPath === 've' || secondPath === 'pin') && thirdPath) {
        return `/examples/outbound-custom-visitor-url/index.html?param=/${secondPath}/${thirdPath}`;
      }
      return null
    }
    window.onload = function () {


     const redirectUrl = getRedirectUrl();
     if (redirectUrl) {
        window.location.replace(redirectUrl);
      } else {
        //redirect to 404
        document.body.innerHTML = "404 Not Found";
      }
    }
  </script>
</head>

<body>Please Wait..</body>

</html>