<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Smart Video Widget Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tw-elements/dist/js/index.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tw-elements/dist/css/index.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-------------------- SmartVideo Widget -------------------->

    <!-- Loading in the Correct Order -->
    <!-- 1. Load the VideoEngager Extension -->
    <script src="https://cdn.videoengager.com/videoengager/js/videoengager.widget.min.js"></script>
    <!-- 2. Load the Configuration File -->
    <script src="configurationFile.js" type="text/javascript"></script>
    <!-- 3. Load the Genesis Widgets Core -->
    <script src="https://apps.mypurecloud.com/widgets/9.0/cxbus.min.js" type="text/javascript"></script>
    <!-- 4. Load the SmartVideo Widget with custom javascript file (/** Perform Auto Loading in widgetLoader.js */) -->
    <script src="widgetLoader.js" type="text/javascript"></script>

    <!-------------------- SmartVideo Widget -------------------->

</head>


<body class="w-screen h-screen flex justify-center bg-gray-100 items-center">

    <!--  Custom Form  -->
    <div class="flex flex-col gap-3 items-center bg-white rounded-lg shadow-sm px-8 py-4">
        <div id="test">Smart Video Widget Demo (Custom UI using custom registration form)</div>
        <form class="w-full py-3" id="customForm">
            <div class="form-group mb-6">
                <label for="firstNameInput" class="form-label inline-block mb-2 text-gray-700">First Name <strong>*
                        Required</strong></label>
                <input type="text" required
                    class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300        rounded    transition  ease-in-out m-0        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                    id="firstNameInput" placeholder="First Name">

            </div>
            <div class="form-group mb-6">
                <label for="lastNameInput" class="form-label inline-block mb-2 text-gray-700">Last Name<strong>*
                        Required</strong></label>
                <input type="text" required
                    class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300        rounded    transition  ease-in-out m-0        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                    id="lastNameInput" placeholder="Last Name">

            </div>
            <div class="form-group mb-6">
                <label for="nickNameInput" class="form-label inline-block mb-2 text-gray-700">Nickname</label>
                <input type="text"
                    class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300        rounded    transition  ease-in-out m-0        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                    id="nickNameInput" placeholder="Nickname">

            </div>
            <div class="form-group mb-6">
                <textarea
                    class="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
                    id="subjectInput" rows="3" placeholder="Subject"></textarea>
            </div>


        </form>
        <!--  End of Custom Form  -->

        <div class="w-full flex justify-between gap-2">
            <button style="display: none;" id="webChatButton" type="button" data-mdb-ripple="true"
                data-mdb-ripple-color="light"
                class="inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">
                Start Web Chat </button>
            <button onclick="endChatCommand()" id="endWebChatButton" style="display: none;" type="button"
                data-mdb-ripple="true" data-mdb-ripple-color="light"
                class="inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">
                End Web Chat </button>

        </div>
    </div>
    <!-- Custom Chat -->
    <div id="chatWidget"
        class="absolute bottom-0 min-w-[350px] right-10 h-[55vh]  bg-white overflow-hidden rounded-t-xl">
        <div class="flex-1 justify-between flex flex-col h-full">
            <div
                class="flex items-center py-2 px-3 justify-between border-b-2 bg-gradient-to-l from-indigo-500 to-blue-500 pb-2 border-gray-200 rounded-br-xl shadow-md">
                <div class="flex gap-3 items-center">
                    <img src="Agent.svg" alt="Agent" class="w-10 h-10 rounded-full bg-white">
                    <span class="text-md text-white font-bold">Agent</span>
                </div>
                <div class="flex items-center space-x-2">
                    <button type="button" onclick="endChatCommand()"
                        class="inline-flex items-center justify-center rounded-lg border px-2 py-2 transition duration-500 ease-in-out fill-white hover:fill-indigo-300 hover:border-indigo-300 outline-none">
                        <?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                            y="0px" width="10px" height="10px" viewBox="0 0 121.31 122.876"
                            enable-background="new 0 0 121.31 122.876" xml:space="preserve">
                            <g>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M90.914,5.296c6.927-7.034,18.188-7.065,25.154-0.068 c6.961,6.995,6.991,18.369,0.068,25.397L85.743,61.452l30.425,30.855c6.866,6.978,6.773,18.28-0.208,25.247 c-6.983,6.964-18.21,6.946-25.074-0.031L60.669,86.881L30.395,117.58c-6.927,7.034-18.188,7.065-25.154,0.068 c-6.961-6.995-6.992-18.369-0.068-25.397l30.393-30.827L5.142,30.568c-6.867-6.978-6.773-18.28,0.208-25.247 c6.983-6.963,18.21-6.946,25.074,0.031l30.217,30.643L90.914,5.296L90.914,5.296z" />
                            </g>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="messages"
                class="flex flex-col space-y-4 p-3 overflow-x-hidden whitespace-normal break-all max-w-[350px] overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch">




            </div>
            <div class="border-t-2 relative border-gray-200  mb-2 sm:mb-0">
                <span id="agentIsTyping" style="display: none;"
                    class="absolute  -top-8 left-14 text-gray-500 text-sm animate-pulse transition-all">Agent Is
                    typing...</span>
                <form onsubmit="onChatSubmit();return false;" class="relative flex overflow-hidden rounded-md">

                    <textarea onblur="autoGrow(this)" oninput="autoGrow(this)" onchange="sendIsTyping()" type="text"
                        id="messageInput" placeholder="Write your message!" style="min-height: 60px;"
                        class="w-full focus:outline-none focus:placeholder-gray-400 text-gray-600  resize-none overflow-hidden placeholder-gray-600 pl-3  rounded-md py-2"></textarea>
                    <div class="absolute right-0 items-center inset-y-0 hidden sm:flex">

                        <button type="submit"
                            class="inline-flex items-center justify-center rounded-lg px-2 py-4 transition duration-500 ease-in-out  fill-blue-500 hover:fill-blue-700 focus:outline-none">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                class="h-6 w-6 ml-2 transform rotate-90">
                                <path
                                    d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z">
                                </path>
                            </svg>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <style>
        .scrollbar-w-2::-webkit-scrollbar {
            width: 0.25rem;
            height: 0.25rem;
        }

        .scrollbar-track-blue-lighter::-webkit-scrollbar-track {
            --bg-opacity: 1;
            background-color: #f7fafc;
            background-color: rgba(247, 250, 252, var(--bg-opacity));
        }

        .scrollbar-thumb-blue::-webkit-scrollbar-thumb {
            --bg-opacity: 1;
            background-color: #edf2f7;
            background-color: rgba(237, 242, 247, var(--bg-opacity));
        }

        .scrollbar-thumb-rounded::-webkit-scrollbar-thumb {
            border-radius: 0.25rem;
        }
    </style>

    <script>
        const el = document.getElementById('messages')
        el.scrollTop = el.scrollHeight
    </script>
    <!--   End Of Custom Chat  -->
</body>

</html>